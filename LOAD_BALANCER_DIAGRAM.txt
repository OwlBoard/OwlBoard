```
╔════════════════════════════════════════════════════════════════════════════╗
║                    OwlBoard Load Balanced Architecture                     ║
╚════════════════════════════════════════════════════════════════════════════╝

                              EXTERNAL USERS
                                    │
                    ┌───────────────┴───────────────┐
                    │                               │
              ┌─────▼──────┐                 ┌──────▼─────┐
              │  Desktop   │                 │   Mobile   │
              │  Frontend  │                 │  Frontend  │
              │ (Next.js)  │                 │ (Flutter)  │
              │ Port: 3002 │                 │ Port: 3001 │
              └─────┬──────┘                 └──────┬─────┘
                    │                               │
                    │ localhost:8000                │ localhost:9000
                    │                               │
╔═══════════════════┴═══════════════════════════════┴════════════════════════╗
║                    PUBLIC NETWORK (owlboard-public-network)                ║
╚════════════════════════════════════════════════════════════════════════════╝
                    │                               │
                    └───────────────┬───────────────┘
                                    │
                          ┌─────────▼─────────┐
                          │  Load Balancer    │
                          │     (Nginx)       │
                          │  Ports: 8000/9000 │
                          │  Algorithm:       │
                          │   least_conn      │
                          └─────────┬─────────┘
                                    │
                    ┌───────────────┼───────────────┐
                    │               │               │
╔═══════════════════┴═══════════════┴═══════════════┴════════════════════════╗
║                  PRIVATE NETWORK (owlboard-private-network)                ║
║                           internal: true                                   ║
╚════════════════════════════════════════════════════════════════════════════╝
                    │               │               │
        ┌───────────┼───────────────┼───────────────┼───────────┐
        │           │               │               │           │
   ┌────▼────┐ ┌───▼─────┐   ┌─────▼────┐   ┌─────▼────┐ ┌────▼────┐
   │   API   │ │   API   │   │   API    │   │   API    │ │  (etc)  │
   │Gateway 1│ │Gateway 2│   │Gateway 3 │   │Gateway 4 │ │         │
   │Port: 80 │ │Port: 80 │   │Port: 80  │   │Port: 80  │ │         │
   └────┬────┘ └───┬─────┘   └─────┬────┘   └─────┬────┘ └─────────┘
        │          │               │              │
        └──────────┴───────┬───────┴──────────────┘
                           │
        ┌──────────────────┼──────────────────┬──────────────┐
        │                  │                  │              │
   ┌────▼────┐      ┌──────▼─────┐    ┌──────▼─────┐  ┌────▼────┐
   │  User   │      │  Canvas    │    │    Chat    │  │Comments │
   │ Service │      │  Service   │    │  Service   │  │ Service │
   │(FastAPI)│      │   (Gin)    │    │ (FastAPI)  │  │(FastAPI)│
   │HTTPS:443│      │  HTTP:8080 │    │ HTTPS:443  │  │HTTP:8000│
   │  mTLS   │      │            │    │   mTLS     │  │         │
   └────┬────┘      └──────┬─────┘    └──────┬─────┘  └────┬────┘
        │                  │                  │             │
   ┌────▼────┐      ┌──────▼─────┐    ┌──────▼─────┐  ┌────▼────┐
   │  MySQL  │      │ PostgreSQL │    │   Redis    │  │ MongoDB │
   │Database │      │  Database  │    │   Cache    │  │Database │
   │Port:3306│      │ Port:5432  │    │ Port:6379  │  │Port:27017│
   └─────────┘      └────────┬───┘    └────────────┘  └─────────┘
                             │
                      ┌──────▼─────┐
                      │  RabbitMQ  │
                      │  Message   │
                      │   Broker   │
                      │ Port:5672  │
                      └────────────┘

╔════════════════════════════════════════════════════════════════════════════╗
║  LOAD BALANCING FEATURES                                                   ║
╠════════════════════════════════════════════════════════════════════════════╣
║  ✓ Algorithm: least_conn (best for WebSocket connections)                 ║
║  ✓ Health Checks: max_fails=3, fail_timeout=30s                           ║
║  ✓ Connection Pool: 64 keepalive connections per gateway                  ║
║  ✓ Automatic Failover: Retry on different gateway if one fails            ║
║  ✓ Zero Downtime: Rolling updates without service interruption            ║
║  ✓ Rate Limiting: 100 req/s per IP at load balancer level                 ║
║  ✓ Monitoring: /health and /lb-status endpoints                           ║
╚════════════════════════════════════════════════════════════════════════════╝

CONTAINER COUNT: 16 Total
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  • 1  Load Balancer
  • 4  API Gateway Replicas (load balanced)
  • 2  Frontends (Desktop + Mobile)
  • 4  Backend Services (User, Canvas, Chat, Comments)
  • 4  Databases (MySQL, PostgreSQL, Redis, MongoDB)
  • 1  Message Broker (RabbitMQ)

TRAFFIC FLOW EXAMPLES:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Desktop User Request:
  Browser → localhost:3002 → Load Balancer:8000 → API Gateway (1-4) → User Service

Mobile User Request:
  App → localhost:3001 → Load Balancer:9000 → API Gateway (1-4) → Chat Service

WebSocket Connection:
  Client → Load Balancer → API Gateway (sticky to one) → Chat Service → Redis

SECURITY LAYERS:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  1. Network Segmentation (Public vs Private networks)
  2. Load Balancer Rate Limiting (100 req/s per IP)
  3. API Gateway CORS Policies (centralized)
  4. Backend mTLS (User & Chat services)
  5. Database Isolation (internal: true on private network)
  6. No Direct Database Access (all ports unexposed)
```
